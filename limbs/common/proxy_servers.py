"""Contains a list of user-agent strings, and a method by which we can grab a random one."""

import random

PROXY_SERVERS = [("98.162.25.29", 1080, "SOCKS5"), ("104.237.253.196", 1080, "SOCKS5"),
                 ("67.205.149.230", 1080, "SOCKS5"), ("72.210.252.134", 1080, "SOCKS5"),
                 ("45.55.23.78", 1080, "SOCKS5"), ("207.97.174.134", 1080, "SOCKS5"),
                 ("64.185.231.58", 1080, "SOCKS5"), ("72.221.164.35", 1080, "SOCKS5"),
                 ("54.90.68.10", 1080, "SOCKS5"), ("98.172.253.135", 1080, "SOCKS5"),
                 ("35.227.157.59", 1080, "SOCKS5"), ("72.217.158.195", 1080, "SOCKS5"),
                 ("72.210.252.134", 1080, "SOCKS5"), ("70.183.39.3", 1080, "SOCKS5"),
                 ("98.172.253.135", 1080, "SOCKS5"), ("67.205.149.230", 1080, "SOCKS5"),
                 ("98.174.90.36", 1080, "SOCKS5"), ("107.175.56.250", 1080, "SOCKS5"),
                 ("50.116.98.39", 1080, "SOCKS5"), ("192.169.244.29", 20634, "SOCKS5"),
                 ("50.62.35.107", 29779, "SOCKS5"), ("132.148.13.47", 1332, "SOCKS5"),
                 ("35.198.28.187", 8080, "HTTP"), ("165.227.29.189", 8080, "HTTP"),
                 ("35.247.223.33", 8080, "HTTP"), ("142.93.191.208", 8080, "HTTP"),
                 ("54.203.48.170", 8080, "HTTP"), ("142.93.127.190", 8080, "HTTP"),
                 ("134.209.15.143", 8080, "HTTP"), ("68.183.121.214", 3128, "HTTP"),
                 ("198.211.103.89", 80, "HTTP"), ("104.248.51.47", 8080, "HTTP"),
                 ("167.99.234.217", 8080, "HTTP"), ("178.128.12.118", 8080, "HTTP"),
                 ("173.72.102.246", 80, "HTTP"), ("134.209.122.54", 8080, "HTTP"),
                 ("206.189.201.40", 8080, "HTTP"), ("142.93.120.86", 3128, "HTTP"),
                 ("67.205.133.13", 8080, "HTTP"), ("165.227.67.144", 8080, "HTTP"),
                 ("68.110.172.76", 3128, "HTTP"), ("23.83.241.251", 3128, "HTTP"),
                 ("45.55.46.222", 8080, "HTTP"), ("206.189.182.246", 80, "HTTP"),
                 ("157.230.57.57", 8080, "HTTP"), ("95.181.189.184", 80, "HTTP"),
                 ("54.214.255.114", 80, "HTTP"), ("209.203.130.51", 8080, "HTTP"),
                 ("138.128.33.54", 8080, "HTTP"), ("138.128.242.204", 8138, "HTTP"),
                 ("54.156.85.16", 3128, "HTTP"), ("18.217.180.199", 3128, "HTTP"),
                 ("67.198.130.146", 8888, "HTTP"), ("184.180.90.226", 8080, "HTTP"),
                 ("34.207.202.81", 80, "HTTP"), ("12.189.125.89", 31442, "HTTP"),
                 ("13.56.2.56", 8090, "HTTP"), ("97.79.174.222", 53281, "HTTP"),
                 ("50.207.12.143", 8080, "HTTP"), ("199.19.203.120", 80, "HTTP"),
                 ("104.155.103.87", 80, "HTTP"), ("159.65.74.11", 80, "HTTP"),
                 ("67.213.235.211", 45021, "HTTP"), ("104.245.69.17", 3128, "HTTP"),
                 ("165.138.55.107", 8080, "HTTP"), ("206.40.115.2", 8080, "HTTP"),
                 ("12.229.217.226", 53281, "HTTP"), ("138.128.242.211", 8138, "HTTP"),
                 ("3.85.235.87", 80, "HTTP"), ("138.128.242.206", 8138, "HTTP"),
                 ("138.128.242.214", 8138, "HTTP"), ("207.188.231.141", 8080, "HTTP"),
                 ("50.233.42.98", 51696, "HTTP"), ("64.185.231.98", 1080, "HTTP"),
                 ("97.72.253.46", 87, "HTTP"), ("50.246.120.125", 8080, "HTTP"),
                 ("138.128.242.72", 8138, "HTTP"), ("74.208.177.198", 80, "HTTP"),
                 ("104.245.228.65", 8080, "HTTP"), ("38.134.10.58", 53281, "HTTP"),
                 ("97.73.1.141", 87, "HTTP"), ("20.41.41.145", 3128, "HTTP"),
                 ("23.226.56.3", 808, "HTTP"), ("159.65.230.251", 8081, "HTTP"),
                 ("157.230.232.130", 80, "HTTP"), ("162.211.126.220", 443, "HTTP"),
                 ("162.243.108.161", 3128, "HTTP"), ("54.242.190.101", 80, "HTTP"),
                 ("68.107.176.152", 80, "HTTP"), ("192.241.245.207", 8080, "HTTP"),
                 ("35.188.131.123", 80, "HTTP"), ("138.68.41.90", 8080, "HTTP"),
                 ("198.199.120.102", 8080, "HTTP"), ("52.32.112.150", 80, "HTTP"),
                 ("159.203.91.6", 3128, "HTTP"), ("35.202.91.97", 80, "HTTP"),
                 ("162.144.220.192", 80, "HTTP"), ("104.236.48.178", 8080, "HTTP"),
                 ("23.226.56.5", 808, "HTTP"), ("204.28.107.94", 8080, "HTTP"),
                 ("24.92.185.91", 8080, "HTTP"), ("138.128.242.189", 8138, "HTTP"),
                 ("128.1.151.218", 8118, "HTTP"), ("142.0.60.27", 58109, "HTTP"),
                 ("198.204.253.116", 3128, "HTTP"), ("134.209.160.51", 8080, "HTTP"),
                 ("107.0.141.230", 3128, "HTTP"), ("192.81.130.28", 80, "HTTP"),
                 ("18.218.6.38", 80, "HTTP"), ("104.43.244.233", 80, "HTTP"),
                 ("45.33.31.25", 80, "HTTP"), ("206.221.177.131", 3128, "HTTP"),
                 ("165.227.214.29", 80, "HTTP"), ("68.177.70.226", 43544, "HTTP"),
                 ("204.14.154.126", 37644, "HTTP"), ("138.128.242.213", 8138, "HTTP"),
                 ("47.48.238.149", 8080, "HTTP"), ("34.206.121.147", 3128, "HTTP"),
                 ("184.105.143.66", 3128, "HTTP"), ("138.128.242.139", 8138, "HTTP"),
                 ("74.82.50.155", 3128, "HTTP"), ("34.192.20.173", 80, "HTTP"),
                 ("71.183.32.181", 53281, "HTTP"), ("67.133.86.33", 57132, "HTTP"),
                 ("52.52.224.12", 80, "HTTP"), ("198.11.178.14", 8080, "HTTP"),
                 ("74.113.169.129", 47208, "HTTP"), ("209.33.120.66", 56423, "HTTP"),
                 ("172.81.151.45", 1080, "HTTP"), ("134.209.45.249", 8080, "HTTP"),
                 ("67.205.146.29", 8080, "HTTP"), ("134.209.66.166", 8080, "HTTP"),
                 ("157.230.220.233", 8080, "HTTP"), ("162.243.108.129", 3128, "HTTP"),
                 ("138.197.204.55", 8080, "HTTP"), ("67.205.149.230", 8080, "HTTP"),
                 ("45.55.27.15", 3128, "HTTP"), ("134.209.41.247", 3128, "HTTP"),
                 ("67.205.174.209", 3128, "HTTP"), ("165.227.62.167", 80, "HTTP"),
                 ("206.189.231.239", 8080, "HTTP"), ("185.144.158.41", 8080, "HTTP"),
                 ("159.122.164.163", 8080, "HTTP"), ("204.29.115.149", 8080, "HTTP"),
                 ("64.91.248.243", 3128, "HTTP"), ("204.48.18.225", 8080, "HTTP"),
                 ("47.89.249.166", 80, "HTTP"), ("34.205.78.12", 80, "HTTP"),
                 ("45.56.100.153", 80, "HTTP"), ("47.89.251.189", 80, "HTTP"),
                 ("52.13.171.28", 80, "HTTP"), ("132.148.150.41", 80, "HTTP"),
                 ("134.209.13.153", 8080, "HTTP"), ("97.75.124.126", 8080, "HTTP"),
                 ("141.193.189.1", 44464, "HTTP"), ("138.128.242.209", 8138, "HTTP"),
                 ("52.53.183.223", 9090, "HTTP"), ("157.230.90.113", 8080, "HTTP"),
                 ("50.197.139.163", 36609, "HTTP"), ("50.250.56.129", 46456, "HTTP"),
                 ("12.228.207.66", 8181, "HTTP"), ("198.183.157.52", 80, "HTTP"),
                 ("205.145.146.34", 48942, "HTTP"), ("73.239.197.175", 8080, "HTTP"),
                 ("166.148.65.54", 8888, "HTTP"), ("205.202.42.230", 8083, "HTTP"),
                 ("134.209.230.82", 8080, "HTTP"), ("67.154.191.164", 37112, "HTTP"),
                 ("166.249.185.135", 8888, "HTTP"), ("185.133.193.182", 3128, "HTTP"),
                 ("12.119.91.130", 53281, "HTTP"), ("50.201.51.216", 8080, "HTTP"),
                 ("170.185.232.207", 8088, "HTTP"), ("67.205.145.105", 3128, "HTTP"),
                 ("209.18.53.103", 8080, "HTTP"), ("45.78.27.62", 443, "HTTP"),
                 ("52.124.6.146", 40834, "HTTP"), ("35.163.249.229", 80, "HTTP"),
                 ("157.230.150.101", 8080, "HTTP"), ("68.183.143.161", 8080, "HTTP"),
                 ("64.33.171.19", 8080, "HTTP"), ("213.166.78.195", 8085, "HTTP"),
                 ("213.166.76.113", 8085, "HTTP"), ("91.188.247.238", 8085, "HTTP"),
                 ("23.81.127.137", 8118, "HTTP"), ("109.236.52.250", 8085, "HTTP"),
                 ("31.40.255.31", 8085, "HTTP"), ("193.56.72.74", 8085, "HTTP"),
                 ("88.218.65.185", 8085, "HTTP"), ("40.114.109.214", 3128, "HTTP"),
                 ("107.170.19.179", 80, "HTTP"), ("32.115.161.78", 44042, "HTTP"),
                 ("47.254.23.63", 3128, "HTTP"), ("68.183.121.154", 8080, "HTTP"),
                 ("24.75.147.187", 53281, "HTTP"), ("35.198.69.233", 80, "HTTP"),
                 ("169.44.183.55", 8081, "HTTP"), ("54.68.54.164", 80, "HTTP"),
                 ("35.175.232.126", 80, "HTTP"), ("163.153.214.50", 8080, "HTTP"),
                 ("206.125.41.135", 80, "HTTP"), ("134.209.13.16", 8080, "HTTP"),
                 ("173.214.169.77", 3128, "HTTP"), ("104.245.69.26", 3128, "HTTP"),
                 ("50.242.113.57", 58619, "HTTP"), ("44.135.216.2", 80, "HTTP"),
                 ("54.91.116.44", 80, "HTTP"), ("176.122.182.254", 80, "HTTP"),
                 ("146.82.236.133", 55478, "HTTP"), ("104.238.146.146", 8111, "HTTP"),
                 ("209.80.12.178", 80, "HTTP"), ("178.128.3.127", 3128, "HTTP"),
                 ("64.18.45.107", 8080, "HTTP"), ("138.197.208.221", 8080, "HTTP"),
                 ("23.81.127.117", 8118, "HTTP"), ("23.81.127.252", 8118, "HTTP"),
                 ("23.81.127.59", 8118, "HTTP"), ("23.81.127.85", 8118, "HTTP"),
                 ("54.148.39.174", 80, "HTTP"), ("18.144.33.223", 80, "HTTP"),
                 ("23.254.129.164", 3128, "HTTP"), ("12.189.125.134", 8080, "HTTP")]


def init_proxy_list():
    """
    Adds a usage count to each proxy server.
    """
    global PROXY_SERVERS
    random.shuffle(PROXY_SERVERS)
    for i, proxy in enumerate(PROXY_SERVERS):
        PROXY_SERVERS[i] = proxy + (0, )


def put_back_broken(proxy):
    """
    Puts back a proxy server that has deemed as "broken," or blacklisted by YouTube.
    It is inserted at the end of the list.
    :param proxy: the 4-tuple that represents a broken proxy server.
    """
    proxy = (proxy[0], proxy[1], proxy[2], len(PROXY_SERVERS) - 1)
    PROXY_SERVERS.insert(proxy[3] - 1, proxy)


def put_back(proxy):
    """
    Puts the proxy server back in the list. It goes further back the more it has been used.
    :param proxy: the 4-tuple proxy gotten from pop()
    """
    proxy = (proxy[0], proxy[1], proxy[2], (proxy[3] + 1 % len(PROXY_SERVERS)))
    PROXY_SERVERS.insert(proxy[3] - 1, proxy)


def pop():
    """
    Returns the first proxy server in the list.
    :return: a 4-tuple containing the ip address, port number, and protocol.
    """
    return PROXY_SERVERS.pop(0)


init_proxy_list()

if __name__ == "__main__":
    print("First 5 proxies: " + str(PROXY_SERVERS[:5]))
    p = pop()
    print("Popped proxy: " + str(p))
    put_back(p)
    print("After putting the proxy back: " + str(PROXY_SERVERS[:5]))
    p = pop()
    print("Popped proxy: " + str(p))
    put_back(p)
    print("After putting the proxy back: " + str(PROXY_SERVERS[:5]))
